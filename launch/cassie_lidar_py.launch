<?xml version="1.0"?>

<launch>
  <node pkg="SegmentationMapping" type="segmentation_node" name="segmentation_node" output="log" required="true">
    <param name="neural_net_graph" type="str" value="$(find SegmentationMapping)/config/optimized_mobilenet_const_nclt_2019_06_11.pb"/>  
    <param name="neural_net_graph" type="str" value="$(find SegmentationMapping)/config/mobilenet_nclt/optimized_graph_mobilenet_trt32_2019-06-15.pb"/> 
    <param name="network_image_input_tensor" type="str" value="network/input/Placeholder:0"/>
    <param name="network_distribution_output_tensor" type="str" value="network/output/ClassDistribution:0"/>
    <param name="network_label_output_tensor" type="str" value="network/output/ClassIndexPrediction:0"/>
    <param name="num_classes" type="int" value="14" />
    <param name="skip_input_img_freq" type="int"    value="1" />
    <param name="neural_net_input_width" type="int" value="640"/>
    <param name="neural_net_input_height" type="int" value="480"/>

    <!-- input topic -->
    <remap from="~color_topic"        to="/camera/color/image_raw" />
    <remap from="~depth_topic"        to="/camera/aligned_depth_to_color/image_raw" />

  </node>

  <arg name="pc_bag_file" default="/home/fangkd/Desktop/2019-06-19-15-39-09.bag" />
  <node pkg="rosbag" type="play" name="bagplayer" args="-l $(arg pc_bag_file)"/>  

  <node pkg="SegmentationMapping" type="lidar_projection_node" name="single_camera" output="screen" required="true">
    <!-- <param name="quaternion" type="string" value="0.057 -0.075 -0.269 0.499 -0.495 0.503 0.502"/> -->
    <rosparam param="imu2camera">[0.15204907, 0.02689208, 0.40570395, -0.4661439, 0.4669757, -0.5309942, 0.5316848]</rosparam>
    <rosparam param="imu2lidar">[-0.033, 0.000, -0.611, 0, 0, 0, 1]</rosparam>
    <param name="image_width" type="int" value="640"/>
    <param name="image_height" type="int" value="480"/>
    <param name="publish_to" type="string" value="/labeled_pointcloud"/>
    <param name="cloud_topic" type="string" value="/velodyne_points"/>
    <param name="image_topic" type="string" value="/camera/color/image_raw"/>
    <param name="camera_info" type="string" value="/camera/color/camera_info"/>  
    <param name="distribution" type="string" value="/segmentation_node/distribution_topic"/>
  </node>
  


</launch>
